{"version":3,"file":"preset-container-queries.dev.cjs","sources":["../src/container-queries.ts"],"sourcesContent":["import { DEV } from 'distilt/env'\nimport {\n  arbitrary,\n  AutocompleteProvider,\n  BaseTheme,\n  parseValue,\n  Preset,\n  RuleResolver,\n  VariantResolver,\n  withAutocomplete,\n} from '@twind/core'\n\nexport interface ContainerQueriesTheme extends BaseTheme {\n  containers: Record<string, string>\n}\n\n// indirection wrapper to remove autocomplete functions from production bundles\nfunction withAutocomplete$<\n  Resolver extends RuleResolver<ContainerQueriesTheme> | VariantResolver<ContainerQueriesTheme>,\n>(resolver: Resolver, autocomplete: AutocompleteProvider<ContainerQueriesTheme> | false): Resolver {\n  if (DEV) {\n    return withAutocomplete(\n      resolver as RuleResolver<ContainerQueriesTheme>,\n      autocomplete,\n    ) as Resolver\n  }\n\n  return resolver\n}\n\nexport default function presetContainerQueries(): Preset<ContainerQueriesTheme> {\n  return {\n    theme: {\n      containers: {\n        xs: '20rem',\n        sm: '24rem',\n        md: '28rem',\n        lg: '32rem',\n        xl: '36rem',\n        '2xl': '42rem',\n        '3xl': '48rem',\n        '4xl': '56rem',\n        '5xl': '64rem',\n        '6xl': '72rem',\n        '7xl': '80rem',\n      },\n    },\n    rules: [\n      [\n        '@container($|-|\\\\/)',\n        withAutocomplete$(\n          ({ 1: $1, $$ }, context) => {\n            // eslint-disable-next-line no-sparse-arrays\n            const [value = '', name] = $1 == '/' ? [, $$] : parseValue($$)\n\n            const type = arbitrary(value, '', context) || value || 'inline-size'\n\n            return name ? { container: `${name} / ${type}` } : { 'container-type': type }\n          },\n          DEV &&\n            ((match) =>\n              match[1] // we get called 3 times ('', '-', '/') - only answer once\n                ? []\n                : [\n                    { prefix: '@container', suffix: '', modifiers: [] },\n                    { prefix: '@container', suffix: '-normal', modifiers: [] },\n                    { prefix: '@container', suffix: '-size', modifiers: [] },\n                    { prefix: '@container', suffix: '-[', modifiers: [] },\n                  ]),\n        ),\n      ],\n    ],\n    variants: [\n      [\n        '@(.+)',\n        withAutocomplete$(\n          (match, context) => {\n            const [value, name] = parseValue(match[1])\n\n            if (value) {\n              const minWidth =\n                context.theme('containers', value) || arbitrary(value, 'containers', context)\n\n              return minWidth && `@container ${name ? name + ' ' : ''}(min-width:${minWidth})`\n            }\n          },\n          DEV &&\n            ((match, context) => [\n              ...Object.entries(context.theme('containers')).map(([suffix, minWidth]) => ({\n                prefix: '@',\n                suffix,\n                label: `@container (min-width: ${minWidth})`,\n                theme: { section: 'containers', key: suffix },\n                modifiers: [],\n              })),\n              { prefix: '@', suffix: '[', modifiers: [] },\n            ]),\n        ),\n      ],\n    ],\n  }\n}\n"],"names":["withAutocomplete$","resolver","autocomplete","withAutocomplete","theme","containers","xs","sm","md","lg","xl","rules","$1","$$","context","value","name","parseValue","type","arbitrary","container","match","prefix","suffix","modifiers","variants","minWidth","Object","entries","map","label","section","key"],"mappings":";;AAgBA,+EAAA;AACA,SAASA,kBAEPC,QAAkB,EAAEC,YAAiE,EAAY;IAE/F,OAAOC,sBACLF,UACAC;AAKN;iBAEe,WAAiE;IAC9E,OAAO;QACLE,OAAO;YACLC,YAAY;gBACVC,IAAI;gBACJC,IAAI;gBACJC,IAAI;gBACJC,IAAI;gBACJC,IAAI;gBACJ,OAAO;gBACP,OAAO;gBACP,OAAO;gBACP,OAAO;gBACP,OAAO;gBACP,OAAO;YACT;QACF;QACAC,OAAO;YACL;gBACE;gBACAX,kBACE,CAAC,EAAE,GAAGY,GAAAA,EAAIC,GAAE,EAAE,EAAEC,UAAY;;oBAE1B,IAAM,CAACC,QAAQ,EAAE,EAAEC,KAAK,GAAGJ,AAAM,OAANA,KAAY;;wBAAGC;qBAAG,GAAGI,KAAAA,WAAWJ,GAAG,EAExDK,OAAOC,KAAAA,SAAAA,CAAUJ,OAAO,IAAID,YAAYC,SAAS;oBAEvD,OAAOC,OAAO;wBAAEI,WAAW,CAAC,EAAEJ,KAAK,GAAG,EAAEE,KAAK,CAAC;wBAAK;wBAAE,kBAAkBA;qBAAM;gBAC/E,GAEG,CAACG,QACAA,KAAK,CAAC,EAAE,GAAA,0DAAA;oBACJ,EAAE,GACF;wBACE;4BAAEC,QAAQ;4BAAcC,QAAQ;4BAAIC,WAAW,EAAE;wBAAC;wBAClD;4BAAEF,QAAQ;4BAAcC,QAAQ;4BAAWC,WAAW,EAAE;wBAAC;wBACzD;4BAAEF,QAAQ;4BAAcC,QAAQ;4BAASC,WAAW,EAAE;wBAAC;wBACvD;4BAAEF,QAAQ;4BAAcC,QAAQ;4BAAMC,WAAW,EAAE;wBAAC;qBACrD;aAEZ;SACF;QACDC,UAAU;YACR;gBACE;gBACAzB,kBACE,CAACqB,OAAOP,UAAY;oBAClB,IAAM,CAACC,OAAOC,KAAK,GAAGC,KAAWI,UAAAA,CAAAA,KAAK,CAAC,EAAE;oBAEzC,IAAIN,OAAO;wBACT,IAAMW,WACJZ,QAAQV,KAAK,CAAC,cAAcW,UAAUI,KAAAA,SAAAA,CAAUJ,OAAO,cAAcD;wBAEvE,OAAOY,YAAY,CAAC,WAAW,EAAEV,OAAOA,OAAO,MAAM,EAAE,CAAC,WAAW,EAAEU,SAAS,CAAC,CAAC;oBACjF,CAAA;mBAGA,CAACL,OAAOP,UAAY;2BAChBa,OAAOC,OAAO,CAACd,QAAQV,KAAK,CAAC,eAAeyB,GAAG,CAAC,CAAC,CAACN,QAAQG,SAAS,GAAM,CAAA;gCAC1EJ,QAAQ;gCACRC;gCACAO,OAAO,CAAC,uBAAuB,EAAEJ,SAAS,CAAC,CAAC;gCAC5CtB,OAAO;oCAAE2B,SAAS;oCAAcC,KAAKT;gCAAO;gCAC5CC,WAAW,EAAE;;wBAEf;4BAAEF,QAAQ;4BAAKC,QAAQ;4BAAKC,WAAW,EAAE;wBAAC;qBAC3C;aAEN;SACF;IACH;AACF"}
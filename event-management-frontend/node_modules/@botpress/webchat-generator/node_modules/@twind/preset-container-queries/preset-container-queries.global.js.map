{"version":3,"file":"preset-container-queries.global.js","sources":["../src/container-queries.ts"],"sourcesContent":["import { DEV } from 'distilt/env'\nimport {\n  arbitrary,\n  AutocompleteProvider,\n  BaseTheme,\n  parseValue,\n  Preset,\n  RuleResolver,\n  VariantResolver,\n  withAutocomplete,\n} from '@twind/core'\n\nexport interface ContainerQueriesTheme extends BaseTheme {\n  containers: Record<string, string>\n}\n\n// indirection wrapper to remove autocomplete functions from production bundles\nfunction withAutocomplete$<\n  Resolver extends RuleResolver<ContainerQueriesTheme> | VariantResolver<ContainerQueriesTheme>,\n>(resolver: Resolver, autocomplete: AutocompleteProvider<ContainerQueriesTheme> | false): Resolver {\n  if (DEV) {\n    return withAutocomplete(\n      resolver as RuleResolver<ContainerQueriesTheme>,\n      autocomplete,\n    ) as Resolver\n  }\n\n  return resolver\n}\n\nexport default function presetContainerQueries(): Preset<ContainerQueriesTheme> {\n  return {\n    theme: {\n      containers: {\n        xs: '20rem',\n        sm: '24rem',\n        md: '28rem',\n        lg: '32rem',\n        xl: '36rem',\n        '2xl': '42rem',\n        '3xl': '48rem',\n        '4xl': '56rem',\n        '5xl': '64rem',\n        '6xl': '72rem',\n        '7xl': '80rem',\n      },\n    },\n    rules: [\n      [\n        '@container($|-|\\\\/)',\n        withAutocomplete$(\n          ({ 1: $1, $$ }, context) => {\n            // eslint-disable-next-line no-sparse-arrays\n            const [value = '', name] = $1 == '/' ? [, $$] : parseValue($$)\n\n            const type = arbitrary(value, '', context) || value || 'inline-size'\n\n            return name ? { container: `${name} / ${type}` } : { 'container-type': type }\n          },\n          DEV &&\n            ((match) =>\n              match[1] // we get called 3 times ('', '-', '/') - only answer once\n                ? []\n                : [\n                    { prefix: '@container', suffix: '', modifiers: [] },\n                    { prefix: '@container', suffix: '-normal', modifiers: [] },\n                    { prefix: '@container', suffix: '-size', modifiers: [] },\n                    { prefix: '@container', suffix: '-[', modifiers: [] },\n                  ]),\n        ),\n      ],\n    ],\n    variants: [\n      [\n        '@(.+)',\n        withAutocomplete$(\n          (match, context) => {\n            const [value, name] = parseValue(match[1])\n\n            if (value) {\n              const minWidth =\n                context.theme('containers', value) || arbitrary(value, 'containers', context)\n\n              return minWidth && `@container ${name ? name + ' ' : ''}(min-width:${minWidth})`\n            }\n          },\n          DEV &&\n            ((match, context) => [\n              ...Object.entries(context.theme('containers')).map(([suffix, minWidth]) => ({\n                prefix: '@',\n                suffix,\n                label: `@container (min-width: ${minWidth})`,\n                theme: { section: 'containers', key: suffix },\n                modifiers: [],\n              })),\n              { prefix: '@', suffix: '[', modifiers: [] },\n            ]),\n        ),\n      ],\n    ],\n  }\n}\n"],"names":["twind","presetContainerQueries","core","theme","containers","xs","sm","md","lg","xl","rules","$1","$$","context","value","name","parseValue","type","arbitrary","container","variants","match","minWidth"],"mappings":"AAgBA,IAAA,CAAAA,KAAA,CAAA,IAAA,CAAAA,KAAA,EAAA,CAAA,EAAA,IAAA,CAAAA,KAAA,CAAAC,sBAAA,CAAA,AAAA,SAAAC,CAAA,CAAA,QAce,UAAiE,CAC9E,MAAO,CACLC,MAAO,CACLC,WAAY,CACVC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJ,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,QACP,MAAO,OACT,CACF,EACAC,MAAO,CACL,CACE,sBAEE,CAAC,CAAE,EAAGC,CAAAA,CAAIC,GAAAA,CAAE,CAAE,CAAEC,IAAY,CAE1B,GAAM,CAACC,EAAQ,EAAE,CAAEC,EAAK,CAAGJ,AAAM,KAANA,EAAY,EAAGC,EAAG,CAAGI,EAAAA,WAAWJ,EAAG,CAExDK,EAAOC,EAAAA,SAAAA,CAAUJ,EAAO,GAAID,IAAYC,GAAS,cAEvD,OAAOC,EAAO,CAAEI,UAAW,CAAC,EAAEJ,EAAK,GAAG,EAAEE,EAAK,CAAC,EAAK,CAAE,iBAAkBA,EAAM,AAC/E,EAYH,CACF,CACDG,SAAU,CACR,CACE,QAEE,CAACC,EAAOR,IAAY,CAClB,GAAM,CAACC,EAAOC,EAAK,CAAGC,EAAWK,UAAAA,CAAAA,CAAK,CAAC,EAAE,EAEzC,GAAIP,EAAO,CACT,IAAMQ,EACJT,EAAQV,KAAK,CAAC,aAAcW,IAAUI,EAAAA,SAAAA,CAAUJ,EAAO,aAAcD,GAEvE,OAAOS,GAAY,CAAC,WAAW,EAAEP,EAAOA,EAAO,IAAM,EAAE,CAAC,WAAW,EAAEO,EAAS,CAAC,CAAC,AACjF,CAAA,AACH,EAaH,CACF,AACH,CACF,CAAA,EAAAtB,MAAAE,IAAA"}